<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>SneakyFS: open_file.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">SneakyFS
   &#160;<span id="projectnumber">1.0</span>
   </div>
   <div id="projectbrief">A Secure UNIX File System</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.2 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('open__file_8c.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">open_file.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &quot;<a class="el" href="system__open__file__table_8h_source.html">system_open_file_table.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="traverse__tree_8h_source.html">traverse_tree.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="open__file_8h_source.html">open_file.h</a>&quot;</code><br/>
</div><div class="textblock"><div class="dynheader">
Include dependency graph for open_file.c:</div>
<div class="dyncontent">
<div class="center"><img src="open__file_8c__incl.png" border="0" usemap="#open__file_8c" alt=""/></div>
<map name="open__file_8c" id="open__file_8c">
<area shape="rect" id="node3" href="system__open__file__table_8h.html" title="system_open_file_table.h" alt="" coords="312,80,483,107"/><area shape="rect" id="node38" href="traverse__tree_8h.html" title="traverse_tree.h" alt="" coords="600,80,709,107"/><area shape="rect" id="node42" href="open__file_8h.html" title="open_file.h" alt="" coords="775,155,860,181"/><area shape="rect" id="node5" href="_i__node_8h.html" title="I_node.h" alt="" coords="361,155,433,181"/><area shape="rect" id="node18" href="error_8h.html" title="error.h" alt="" coords="632,304,689,331"/><area shape="rect" id="node7" href="glob__data_8h.html" title="glob_data.h" alt="" coords="421,304,509,331"/><area shape="rect" id="node13" href="glob__func_8h.html" title="glob_func.h" alt="" coords="247,229,336,256"/><area shape="rect" id="node25" href="index__block_8h.html" title="index_block.h" alt="" coords="495,229,597,256"/></map>
</div>
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ae482b5d82cfd7a92ea1f2815c5965f3c"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="open__file_8c.html#ae482b5d82cfd7a92ea1f2815c5965f3c">sfs_open</a> (char *pathname)</td></tr>
<tr class="memdesc:ae482b5d82cfd7a92ea1f2815c5965f3c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Opens the file specified by the pathname, if the file is successfully opened a file descriptor is returned.  <a href="#ae482b5d82cfd7a92ea1f2815c5965f3c"></a><br/></td></tr>
<tr class="separator:ae482b5d82cfd7a92ea1f2815c5965f3c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a69191ccea40f8fffb8fef924f235650e"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="open__file_8c.html#a69191ccea40f8fffb8fef924f235650e">show_information</a> (int fd)</td></tr>
<tr class="memdesc:a69191ccea40f8fffb8fef924f235650e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Show all of the information stored in the given file descriptor.  <a href="#a69191ccea40f8fffb8fef924f235650e"></a><br/></td></tr>
<tr class="separator:a69191ccea40f8fffb8fef924f235650e"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="ae482b5d82cfd7a92ea1f2815c5965f3c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int sfs_open </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>pathname</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Opens the file specified by the pathname, if the file is successfully opened a file descriptor is returned. </p>
<p>Since file descriptors are simply copies of inodes, this function traverses the specified path and attempts to find the inode with a name that matches the one specified in the path. This is done by traversing the index blocks at each token in the path specified, and checking the name of the path token against the inodes at each location specified by the index. Once the inode with the name matching the final path token has been found, the inode pseudo-object returned is added to the system-wide open file table.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pathname</td><td>The full pathname of a file.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Returns a file descriptor for the file opened. If the fd &gt;= 0 then the file has successfully opened. If the fd &lt; 0 then the file has failed to open.</dd></dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">FILE_NOT_FOUND</td><td>If the file at the specified path does not exist.</td></tr>
    <tr><td class="paramname">INVALID_PATH</td><td>If the specified path is invalid.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section author"><dt>Author</dt><dd>Daniel Smullen</dd>
<dd>
Jonathan Gillett</dd>
<dd>
Joseph Heron</dd></dl>
<dl class="section copyright"><dt>Copyright</dt><dd>GNU General Public License V3 </dd></dl>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="open__file_8c_ae482b5d82cfd7a92ea1f2815c5965f3c_cgraph.png" border="0" usemap="#open__file_8c_ae482b5d82cfd7a92ea1f2815c5965f3c_cgraph" alt=""/></div>
<map name="open__file_8c_ae482b5d82cfd7a92ea1f2815c5965f3c_cgraph" id="open__file_8c_ae482b5d82cfd7a92ea1f2815c5965f3c_cgraph">
<area shape="rect" id="node3" href="glob__func_8c.html#af1ee345363b6472fc32adc42a849f378" title="Tokenize a path into an array of tokens." alt="" coords="149,5,251,32"/><area shape="rect" id="node7" href="error_8c.html#af85f0519da49c9e50bf3d1feffa74ef3" title="Prints an error code." alt="" coords="339,435,419,461"/><area shape="rect" id="node9" href="super__block_8c.html#a5bdef04f60586e309e3e42e89326d62d" title="Get the location of the root directory." alt="" coords="509,157,579,184"/><area shape="rect" id="node11" href="glob__func_8c.html#a4f496ee5ac2e8ea15ed2d44dd16828a1" title="Allocate a buffer to write to memory of a given size." alt="" coords="651,208,743,235"/><area shape="rect" id="node17" href="traverse__tree_8c.html#a91c00022d1ad5207d846646fac32e4b0" title="Traverse the file system structure." alt="" coords="129,333,271,360"/><area shape="rect" id="node39" href="_i__node_8c.html#a82f261d23645f5610e7c32f3b34d919c" title="Get the contents of an inode given its location on disk." alt="" coords="505,473,583,500"/><area shape="rect" id="node45" href="glob__func_8c.html#a29366f8689bb05dc0f4abe8f6415756b" title="Copy the data from one buffer to another, given the size of both." alt="" coords="153,485,247,512"/><area shape="rect" id="node47" href="block__func_8c.html#a8d2c516f00e918d009b5fbaf1cfa463b" title="A wrapper for the put_block function." alt="" coords="156,688,244,715"/><area shape="rect" id="node51" href="open__file_8c.html#a69191ccea40f8fffb8fef924f235650e" title="Show all of the information stored in the given file descriptor." alt="" coords="138,435,262,461"/><area shape="rect" id="node57" href="system__open__file__table_8c.html#aeda1a7f2db1183bbb89437b6a07d2c71" title="Add the inode to the system wide open file table." alt="" coords="150,536,250,563"/><area shape="rect" id="node5" href="glob__func_8c.html#a2fe7ca36f076470a50c2a5a7146de61d" title="Frees the memory allocated for the tokens." alt="" coords="333,5,424,32"/><area shape="rect" id="node13" href="block__func_8c.html#a1dcadd38a012a1218ab2100bda116861" title="A wrapper for the get_block function." alt="" coords="655,259,740,285"/><area shape="rect" id="node15" href="blockio_8c.html#aba494f8ba12c5888abc3991a9a1a4fa0" title="Retrieves a block from disk." alt="" coords="793,259,871,285"/><area shape="rect" id="node20" href="_i__node_8c.html#a8c3230f033a02dda88ea580b2b28f59e" title="Get the index block which an inode links to given the inode&#39;s location on disk." alt="" coords="486,259,602,285"/><area shape="rect" id="node24" href="index__block_8c.html#a58c6c55e76e88de10da638a624574947" title="This function takes an index block data structure and returns the locations of all data blocks which ..." alt="" coords="331,333,427,360"/><area shape="rect" id="node33" href="_i__node_8c.html#a37821b1523b1431305feddc288c16355" title="find_inode" alt="" coords="338,208,419,235"/><area shape="rect" id="node27" href="glob__func_8c.html#ae6b48ca0727ba8a874b5442254e1d31a" title="Concatenate two arrays." alt="" coords="513,360,575,387"/><area shape="rect" id="node29" href="glob__func_8c.html#a12db81dbcf4d3c41013509bb19d7053c" title="Concatenate two byte arrays." alt="" coords="501,309,587,336"/><area shape="rect" id="node35" href="_i__node_8c.html#a82ee207647edbab6ce13634925926122" title="Get the name of the file given its inode&#39;s location on disk." alt="" coords="505,208,583,235"/><area shape="rect" id="node49" href="blockio_8c.html#a800219862241422fe7dee4411b4b995e" title="Writes a block to disk." alt="" coords="339,688,418,715"/><area shape="rect" id="node53" href="system__open__file__table_8c.html#aad11d05dccc34b2921e2482e743f32e6" title="Get an inode instance from the system wide open file table." alt="" coords="320,485,437,512"/><area shape="rect" id="node59" href="system__open__file__table_8c.html#ad0b54d7f70662d95ea7cd7429913cb9e" title="Finds an open location in the swoft." alt="" coords="331,587,426,613"/></map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="open__file_8c_ae482b5d82cfd7a92ea1f2815c5965f3c_icgraph.png" border="0" usemap="#open__file_8c_ae482b5d82cfd7a92ea1f2815c5965f3c_icgraph" alt=""/></div>
<map name="open__file_8c_ae482b5d82cfd7a92ea1f2815c5965f3c_icgraph" id="open__file_8c_ae482b5d82cfd7a92ea1f2815c5965f3c_icgraph">
<area shape="rect" id="node3" href="sfstest_8c.html#a88d3b903798a494fd7297714fd0e5c4c" title="sfs_test" alt="" coords="128,5,197,32"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a69191ccea40f8fffb8fef924f235650e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int show_information </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>fd</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Show all of the information stored in the given file descriptor. </p>
<p>Since file descriptors are simply inode pseudo-objects, this function simply prints the attributes associated with an inode's defined data structure.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">fd</td><td>integer, the file descriptor.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Returns an integer value. The function is adjusted to output the file descriptor if the file descriptor is retrieved successfully, to allow for it to be used on the return line. If the value returned is &gt;= 0 then the function successfully retrieved a file descriptor. If the value &lt; 0 then the function was unsuccessful.</dd></dl>
<dl class="section author"><dt>Author</dt><dd>Daniel Smullen</dd>
<dd>
Jonathan Gillett</dd>
<dd>
Joseph Heron</dd></dl>
<dl class="section copyright"><dt>Copyright</dt><dd>GNU General Public License V3 </dd></dl>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="open__file_8c_a69191ccea40f8fffb8fef924f235650e_cgraph.png" border="0" usemap="#open__file_8c_a69191ccea40f8fffb8fef924f235650e_cgraph" alt=""/></div>
<map name="open__file_8c_a69191ccea40f8fffb8fef924f235650e_cgraph" id="open__file_8c_a69191ccea40f8fffb8fef924f235650e_cgraph">
<area shape="rect" id="node3" href="system__open__file__table_8c.html#aad11d05dccc34b2921e2482e743f32e6" title="Get an inode instance from the system wide open file table." alt="" coords="179,31,296,57"/><area shape="rect" id="node13" href="error_8c.html#af85f0519da49c9e50bf3d1feffa74ef3" title="Prints an error code." alt="" coords="197,81,277,108"/><area shape="rect" id="node5" href="_i__node_8c.html#a82f261d23645f5610e7c32f3b34d919c" title="Get the contents of an inode given its location on disk." alt="" coords="345,31,423,57"/><area shape="rect" id="node7" href="glob__func_8c.html#a4f496ee5ac2e8ea15ed2d44dd16828a1" title="Allocate a buffer to write to memory of a given size." alt="" coords="473,5,565,32"/><area shape="rect" id="node9" href="block__func_8c.html#a1dcadd38a012a1218ab2100bda116861" title="A wrapper for the get_block function." alt="" coords="476,56,561,83"/><area shape="rect" id="node11" href="blockio_8c.html#aba494f8ba12c5888abc3991a9a1a4fa0" title="Retrieves a block from disk." alt="" coords="614,56,693,83"/></map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="open__file_8c_a69191ccea40f8fffb8fef924f235650e_icgraph.png" border="0" usemap="#open__file_8c_a69191ccea40f8fffb8fef924f235650e_icgraph" alt=""/></div>
<map name="open__file_8c_a69191ccea40f8fffb8fef924f235650e_icgraph" id="open__file_8c_a69191ccea40f8fffb8fef924f235650e_icgraph">
<area shape="rect" id="node3" href="open__file_8h.html#ae482b5d82cfd7a92ea1f2815c5965f3c" title="Opens the file specified by the pathname, if the file is successfully opened a file descriptor is ret..." alt="" coords="179,5,253,32"/><area shape="rect" id="node5" href="sfstest_8c.html#a88d3b903798a494fd7297714fd0e5c4c" title="sfs_test" alt="" coords="301,5,371,32"/></map>
</div>
</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="open__file_8c.html">open_file.c</a></li>
    
    
    
  </ul>
</div>
</body>
</html>
